<main>
  <div class="firstRow">
    <h4>Filtrar:</h4>
    <div class="dropdown">
      <select id="category" (change)="filterSpecialties(); filterProfessionalsCategory(); filterProfessionalsType(); orderBy()">
        <option value="Qualquer" disabled hidden selected>Categoria</option>
        <option>Qualquer</option>
        <option *ngFor="let professionalType of professionalTypes" value="{{ professionalType.name }}">{{ professionalType.name }}</option>
      </select>
    </div>
    <div class="dropdown">
      <select id="specialty" (change)="filterProfessionalsCategory(); filterProfessionalsType(); orderBy()">
        <option value="Qualquer" disabled hidden selected>Especialidade</option>
        <option>Qualquer</option>
        <option *ngFor="let specialty of specialtiesFiltered" value="{{specialty.name}}">{{ specialty.name }}</option>
      </select>
    </div>
    <div class="dropdown">
      <select id="type" (change)="filterProfessionalsType(); orderBy()">
        <option value="Qualquer" disabled hidden selected>Tipo de Consulta</option>
        <option>Qualquer</option>
        <option value="Online">Online</option>
        <option value="Presential">Presencial</option>
        <option value="Home">Domicilio</option>
      </select>
    </div>
    <button class="btn">Ver Mapa</button>
  </div>

  <div class="secondRow">
    <h4>Ordenar:</h4>
    <div class="dropdown">
      <select id="order" (change)="orderBy()">
        <option value="Qualquer" disabled hidden selected>Ordenar</option>
        <option value="Rank">Ranking</option>
        <option value="p<">Preco Ascendente</option>
        <option value="p>">Preco Descendente</option>
      </select>
    </div>
  </div>

  <div class="header">
    <div id="searchDiv" [class.rounded-bottom]=" searchResults.length > 0">
      <figure class="searchIcon">
        <img src="assets/images/HomePage/search.png" alt="Ícone de pesquisa de filtros">
      </figure>
      <input class="searchBar" type="text" placeholder="Pesquise por nome" (keyup)="onSearchInput($event)">
    </div>
  </div>

  <section class="categorias">
    <div class="categoria" *ngFor="let service of paginatedServices">
      <div class="tab" [routerLink]="['/make-appointment']" [queryParams]="{ serviceId: service.serviceId }">
        <div id="icons">
          <figure class="rating">{{ returnStars(service) === 0 ? '-' : returnStars(service)}} <img alt="Estrela" class="star" src="/assets/images/profile/star.png"></figure>
        </div>
        <div class="content">
          <div class="content-name">
            <span>{{ service.professional.professionalInfo.firstName  }} {{ service.professional.professionalInfo.lastName }}</span>
          </div>
          <div>
            <span>Especialidade:</span>
            <p>{{service.specialty}}</p>
          </div>
          <!--<div><p>{{service.professional.location}}</p></div>-->
          <p>Preço por hora: {{service.pricePerHour}}€</p>
        </div>
      </div>
    </div>
  </section>

  <div class="pagination">
    <button class="page-arrow" id="prev" (click)="prevPage()" [disabled]="currentPage === 1"><</button>
    <button class="page-btn" (click)="goToPage(currentPage-2)" [disabled]="currentPage-2 <= 0">{{currentPage-2}}</button>
    <button class="page-btn" (click)="goToPage(currentPage-1)" [disabled]="currentPage-1 <= 0">{{currentPage-1}}</button>
    <button class="page-btn current" (click)="goToPage(currentPage)">{{currentPage}}</button>
    <button class="page-btn" (click)="goToPage(currentPage+1)" [disabled]="currentPage+1 > totalPages">{{currentPage+1}}</button>
    <button class="page-btn" (click)="goToPage(currentPage+2)" [disabled]="currentPage+2 > totalPages">{{currentPage+2}}</button>
    <button class="page-btn" (click)="goToPage(currentPage+3)" [disabled]="currentPage+3 > totalPages">{{currentPage+3}}</button>
    <button class="page-arrow" id="next" (click)="nextPage()" [disabled]="currentPage === totalPages">></button>
  </div>
</main>
