<main>
  <div class="title">
    <h1>Marcar Consulta</h1>
    <figure><img id="img-perfil" src="/assets/images/Perfil/profileImage.jpg" /></figure>
    <div class="name" id="name-title"></div>
  </div>

  <div class="select-dropdown">
    <select [(ngModel)]="selectedOption" (change)="onOptionSelectionChange($event)">
      <option value="">Tipo de Consulta</option>
      <option value="Presential">Presencial</option>
      <option value="Online">Online</option>
      <option value="Home">Domicílio</option>
    </select>
  </div>

  <div>
    <h3>Consulta de {{especialidade}} - {{categoria}} </h3>
    <div class="appointement">
      <div id="title-data">
        <div><h3 id="">Sugestão de Marcação</h3></div>
        <div class="text-appointement">4 janeiro 2024 </div>
      </div>
      <div id="name-button">
        <div class="hours"><b>18:00</b></div>
        <div class="type-appointment">Presencial</div>
        <button class="btn-edit">Marcar</button>
      </div>
    </div>
  </div>

  <div class="checkbox">
    <input type="checkbox" id="myCheckbox" [(ngModel)]="checked">
    <label for="myCheckbox"> Quero marcar para outra data</label>
  </div>

  <div class="calender-slots" *ngIf="checked">
    <app-calendario (dateChange)="handleDateChange($event)"></app-calendario>

    <div class="slots">
      <h3 id="title-slots">Vagas disponíveis</h3>
      <div id="available-slots" *ngIf="slots.length > 0; else noSlots">
        <div *ngFor="let slot of slots">
          <div class="box-slot">
            <div class="left">
              <div class="hours-slots"><b>{{convertToHours(slot.start)}}</b></div>
              <div class="data-slots">{{convertToDate(slot.start)}} </div>
            </div>
            <div class="right">
              <div class="type-appointment">{{getAppointmentType(slot.appointmentType)}}</div>
              <div *ngIf="slot.id">
                <button class="btn-edit" (click)="marcarClick(slot.id)">Marcar</button>
              </div>
            </div>
          </div>
          <hr />
        </div>
      </div>

      <ng-template #noSlots>
        <div class="box-slot">
          <div class="left">
            <b>Não existem vagas disponíveis.</b>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
  <div *ngIf="errorMessages.length > 0">
    <app-validation-messages [errorMessages]="errorMessages"></app-validation-messages>
  </div>
</main>
 
